<script>
// ...
function loadObras() {
    fetch('/api/propostas').then(r=>r.json()).then(d=>{
        const l = document.getElementById('lista-obras'); l.innerHTML='';
        d.forEach(o => {
            // Só mostra obras Aprovadas ou Em Execução para o sondador não ver orçamentos perdidos
            if (o.status === 'Aprovada' || o.status === 'Em Execução') {
                l.innerHTML += `
                <div class="card card-obra shadow-sm" onclick="entrarObra('${o.id}', '${o.cliente}')">
                    <div class="card-body">
                        <h5 class="fw-bold mb-1">${o.cliente}</h5>
                        <small class="d-block text-muted"><i class="bi bi-geo-alt me-1"></i>${o.endereco}</small>
                        <small class="d-block text-muted mt-1"><i class="bi bi-telephone me-1"></i>${o.telefone || 'Sem telefone'}</small>
                    </div>
                </div>`;
            }
        });
        if (l.innerHTML === '') l.innerHTML = '<div class="text-center text-muted mt-5">Nenhuma obra em execução no momento.</div>';
    });
}
// ...
</script>